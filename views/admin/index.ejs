<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js dev" lang="en"> <!--<![endif]-->
<head>
    <title>Developer Factory</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="../images/apple-touch-icon.png">
    <link rel="stylesheet" href="../stylesheets/bootstrap.min.css" />
    <link rel="stylesheet" href="../stylesheets/dev.css" />
    <link href="//fonts.googleapis.com/css?family=Titillium+Web:200,300,400" rel="stylesheet" type="text/css">
    <script data-main="../js/admin" src="../js/libs/require.js"></script>
</head>
<body>
<div id="site-header">
    <div class="logo_container">
        <a href="../">
            <img src="../images/heading.png" alt="Developer Factory" /><h4>Developer Factory Administrator</h4>
        </a>
    </div>
    <div class="control-buttons hidden">
        <a href="#" id="user-panel-toggle"><i class="icon-chevron-down icon-white"></i><span id="username-placeholder"></span></a>
    </div>
</div>
<div id="user-panel" style="display:none">
    <div class="col">
        <span class="user-username"></span><br />
        <span class="user-company"></span>
    </div>
    <div class="btns">
        <a href="#/logout" class="btn btn-primary">Log Out</a>
    </div>
</div>
<div id="admin" class="page hidden">
    <div class="row-fluid">
        <div class="span1"></div>
        <div class="span10 page-view">
            <ul class="nav nav-tabs">
              <li id="mgmt-users-tab" class="active"><a href="#/users">Users</a></li>
              <li id="mgmt-invites-tab"><a href="#/invites">Pending</a></li>
              <li id="mgmt-requests-tab"><a href="#/requests">Requests</a></li>
                <li id="mgmt-invitations-tab"><a href="#/invitations">User Invitations</a></li>
                <li id="mgmt-events-tab"><a href="#/events">Event Logging</a></li>
                <li id="mgmt-actions-tab"><a href="#/actions">User Management</a></li>
            </ul>
            <div class="tab-content">
              <div class="tab-pane active" id="mgmt-users">
                <h3>Users</h3>
                <div id="mgmt-users-list"></div>
              </div>
              <div class="tab-pane" id="mgmt-invites">
                <h3>Users Pending Registration</h3>
                <div id="mgmt-invites-list"></div>
              </div>
              <div class="tab-pane" id="mgmt-requests">
                <h3>Users Requesting for Invitation</h3>
                <div id="mgmt-requests-list"></div>
              </div>
                <div class="tab-pane" id="mgmt-invitations">
                    <h3>Users Invited by Other Users</h3>
                    <div id="mgmt-invitations-list"></div>
                </div>
                <div class="tab-pane" id="mgmt-events">
                    <h3>Event Logging</h3>
                    <div id="mgmt-events-list"></div>
                </div>
                <div class="tab-pane" id="mgmt-actions">
                    <h3>User Management</h3>
                    <div id="invite-user-container">
                        <h4>Invite a User</h4>
                        <div class="input-append buttons-section">
                            <input class="span5" id="invited-user-email" type="text" placeholder="Email Address">
                            <button class="btn" type="button" id="send-invitation">Send Invitation</button>
                        </div>
                        <div class="loading buttons-section" style="display:none">
                            Loading.. Please Wait.. <img src="../images/ajax-loader-sm.gif" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="span1"></div>
    </div>
</div>
<div id="admin-details" class="page hidden">
    <div class="row-fluid">
        <div class="span1"></div>
        <div class="span10 page-view"></div>
        <div class="span1"></div>
    </div>
</div>

<div id="loadingBar">
    <div id="loadingContent">
        Loading resources, please wait..
        <div class="progress progress-striped active">
            <div class="bar" style="width:50%;"></div>
        </div>
    </div>
</div>
<div id="download-container" class="hidden"></div>
<!-- views start -->
<script id="AdminUserDetailsView" type="text/template">
            <h3>User: <%- model.profileName %></h3>
            <div class="buttons">
                <div class="buttons-section">
                    <button did="delete-user" type="button" class="btn">Delete User</button>
                    <button did="edit-user" type="button" class="btn">Edit User</button>
                    <% if(model.userType == 'guest'){ %>
                    <button did="approve-user" type="button" class="btn btn-primary">Approve User</button>
                    <% } %>
                    <button did="deactivate-user" type="button" class="btn btn-primary <% if(model.activated !== true){ %>hidden<% } %>">Deactivate User</button>
                    <button did="activate-user" type="button" class="btn btn-primary <% if(model.activated === true){ %>hidden<% } %>">Activate User</button>
                </div>
                <div class="buttons-section-edit" style="display:none">
                    <button did="edit-user-cancel" type="button" class="btn">Cancel Changes</button>
                    <button did="edit-user-save" type="button" class="btn btn-primary">Save Changes</button>
                </div>
                <div class="loading buttons-section" style="display:none">
                    Loading.. Please Wait.. <img src="../images/ajax-loader-sm.gif" />
                </div>
                <div class="pull-right">
                    <a href="#/users" class="btn"><i class="icon icon-chevron-left"></i>Back to Administration Page</a>
                </div>
            </div>
            <hr />
            <div class="row-fluid">
                <div class="span12">
                    <h4>User Information</h4>
                    <table class="table table-striped" id="user-data-container">
                        <tbody>
                            <tr>
                                <td width="5px">First Name</td>
                                <td width="5px">
                                    <span class="user-edit-value"><%- model.firstName %></span>
                                    <span class="user-edit-input" style="display:none"><input type="text" name="firstName" value="<%- model.firstName %>" /></span>
                                </td>
                            </tr>
                            <tr>
                                <td width="5px">Last Name</td>
                                <td width="5px">
                                    <span class="user-edit-value"><%- model.lastName %></span>
                                    <span class="user-edit-input" style="display:none"><input type="text" name="lastName" value="<%- model.lastName %>" /></span>
                                </td>
                            </tr>
                            <tr>
                                <td width="5px">Email Address</td>
                                <td width="5px"><%- model.email %></td>
                            </tr>
                            <tr>
                                <td width="5px">Company</td>
                                <td width="5px">
                                    <span class="user-edit-value"><%- model.companyName %></span>
                                    <span class="user-edit-input" style="display:none"><input type="text" name="companyName" value="<%- model.companyName %>" /></span>
                                </td>
                            </tr>
                            <tr>
                                <td width="5px">Role Within Company</td>
                                <td width="5px">
                                    <span class="user-edit-value"><%- model.roleWithinCompany %></span>
                                    <span class="user-edit-input" style="display:none"><input type="text" name="roleWithinCompany" value="<%- model.roleWithinCompany %>" /></span>
                                </td>
                            </tr>
                            <tr>
                                <td width="5px">Date Accepted EULA</td>
                                <td width="5px"><%- model.dateAcceptedEULA %></td>
                            </tr>
                            <tr>
                                <td width="5px">Type of User (Internal)</td>
                                <td width="5px">
                                    <span class="user-edit-value"><%- model.userType %></span>
                                    <span class="user-edit-input" style="display:none"><input type="text" name="userType" value="<%- model.userType %>" /></span>
                                </td>
                            </tr>
                            <% if(model.invitedEmail){ %>
                            <tr>
                                <td width="5px">Invited Email</td>
                                <td width="5px"><%- model.invitedEmail %></td>
                            </tr>
                            <% } %>
                            <% if(model.inviterId){ %>
                            <tr>
                                <td width="5px">Invited By User</td>
                                <td width="5px"><%- model.inviterId %> (UserId)</td>
                            </tr>
                            <% } %>
                            <tr>
                                <td width="5px">Created On</td>
                                <td width="5px"><%- model.createdAt %></td>
                            </tr>
                            <tr>
                                <td width="5px">Last Updated</td>
                                <td width="5px"><%- model.updatedAt %></td>
                            </tr>
                            <tr>
                                <td width="5px">Magnet Id</td>
                                <td width="5px"><%- model.magnetId %></td>
                            </tr>
                            <tr id="project-list-container"></tr>
                            <tr id="cloudaccount-list-container"></tr>
                            <tr id="invitedusers-list-container"></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <a href="#/users" class="main-btn btn"><i class="icon icon-chevron-left"></i>Back to Administration Page</a>
                </div>
            </div>
</script>
<script id="ProjectListView" type="text/template">
    <% if(col && col.length > 0){ %>
        <td><h4>Projects</h4></td>
        <td>
            <% _.each(col, function(project, i){ %>
            <table class="table table-bordered table-striped table-hover">
                <tr>
                    <td>Name</td>
                    <td><%- project.attributes.name %></td>
                </tr>
                <tr>
                    <td>Description</td>
                    <td><%- project.attributes.description %></td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td><%- project.attributes.version %></td>
                </tr>
                <tr>
                    <td>Created On</td>
                    <td><%- project.attributes.createdAt %></td>
                </tr>
                <tr>
                    <td>Last Updated</td>
                    <td><%- project.attributes.updatedAt %></td>
                </tr>
                <tr>
                    <td>Configuration</td>
                    <td><a class="btn" href="/rest/projects/<%- project.attributes.magnetId %>/getConfig">Download Magnet App Project Profile</a></td>
                </tr>
            </table>
            <% }); %>
        </td>
    <% } %>
</script>
<script id="CloudAccountListView" type="text/template">
    <% if(col && col.length > 0){ %>
    <td><h4>CloudAccounts</h4></td>
    <td>
        <% _.each(col, function(cloudAccount, i){ %>
        <table class="table table-bordered table-striped table-hover">
            <tr>
                <td>Owner Type</td>
                <td><%- cloudAccount.attributes.ownerType %></td>
            </tr>
            <tr>
                <td>Name</td>
                <td><%- cloudAccount.attributes.name %></td>
            </tr>
            <tr>
                <td>Provider</td>
                <td><%- cloudAccount.attributes.provider %></td>
            </tr>
            <tr>
                <td>Bucket Name</td>
                <td><%- cloudAccount.attributes.bucketName %></td>
            </tr>
            <tr>
                <td>Access Key ID</td>
                <td><%- cloudAccount.attributes.accessKeyId %></td>
            </tr>
            <tr>
                <td>Secret Access Key</td>
                <td><%- cloudAccount.attributes.secretAccessKey %></td>
            </tr>
            <tr>
                <td>Created On</td>
                <td><%- cloudAccount.attributes.createdAt %></td>
            </tr>
            <tr>
                <td>Last Updated</td>
                <td><%- cloudAccount.attributes.updatedAt %></td>
            </tr>
        </table>
        <% }); %>
    </td>
    <% } %>
</script>
<script id="InvitedUsersListView" type="text/template">
    <% if(col && col.length > 0){ %>
    <td><h4>Invited Users</h4></td>
    <td>
        <table class="table table-bordered table-striped table-hover">
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Invited On</th>
            </tr>
            <tbody>
            <% _.each(col, function(user, i){ %>
                <tr>
                    <td><%- user.attributes.profileName %></td>
                    <td><%- user.attributes.email || user.attributes.invitedEmail %></td>
                    <td><%- user.attributes.createdAt %></td>
                </tr>
            <% }); %>
            </tbody>
        </table>
    </td>
    <% } %>
</script>
<script id="tableTmplView" type="text/template">
<% if(!disableControls){ %>
<% if(!hideSearch){ %>
                                    <div class="input-append">
                                        <div class="input-container">
                                            <input type="text" maxlength="200" placeholder="Search for...">
                                        </div>
                                        <div class="btn-group">
                                            <button class="btn btn-clear" type="button" style="display:none">Clear <i class="icon-remove"></i></button>
                                            <button class="btn dropdown-toggle">
                                                <span class="searchby-text">Search By<% if(searchBy){ %>: <%- headers[searchBy] %><% } %></span>
                                                <span class="caret"></span>
                                            </button>
                                            <button class="btn btn-primary" type="button">Search</button>
                                            <ul class="dropdown-menu">
<% _.each(headers, function(header, key){ %>
                                                <% if(key != 'profileName' && key != 'accountMagnetActive'){ %><li<% if(key == searchBy){ %> class="active"<% } %>><a href="#" p="<%- key %>"><%- header %><% } %></a></li>
<% }); %>
                                            </ul>
                                        </div>
                                    </div>
<% } %>
                                    <p>Click the column heading to sort in ascending or descending order. Click X to remove the Sort order. </p>
                                    <ul class="breadcrumb">
                                        Sort Order: <span></span>
                                    </ul>
<% } %>
                                    <table class="table table-striped table-hover table-bordered">
                                      <thead>
                                        <tr>
<% _.each(headers, function(header, key){ %>
                                            <th <% if(key != 'profileName' && key != 'accountMagnetActive'){ %>p="<%- key %>"<% } %>><%- header %><span class=""></span></th>
                                            <% }); %>
<% if(!disableInfo){ %>
                                            <th class="listview-details">Details</th>
<% } %>
                                        </tr>
                                      </thead>
                                      <tbody></tbody>
                                    </table>
                                    <div class="pagination"></div>
</script>
<script id="tableItemView" type="text/template">
<% _.each(collection, function(model, key){ %>
                                        <tr data-id="<%- model.attributes.magnetId %>">
<% _.each(headers, function(header, key){ %>
                                          <td><% if(model.attributes[key]){ %><% if(model.attributes[key].length > 0){ %><%- model.attributes[key] %><% } %><% } %></td>
<% }); %>
<% if(!disableInfo){ %>
                                          <td><button class="btn">Details</button></td>
<% } %>
                                        </tr>
<% }); %>
</script>
<script id="paginationDetailView" type="text/template">
<% if(paging.total > 10){ %>
    <ul>
        <li <% if(paging.start == 0){ %>class="disabled"<% } %>><a href="#" page="<%-paging.previous%>">Prev</a></li>
<% for(i=0;i<(paging.total <= 200 ? paging.total : 200);i+=10){ %>
        <li <% if(paging.start == i){ %>class="disabled"<% } %> ><a href="#" page="<%-i%>"><%-(i/10)+1%></a></li>
<% } %>
        <li <% if(!paging.next || paging.start == 190 || (paging.start+paging.rpp) == paging.total){ %>class="disabled"<% } %>><a href="#" page="<%-paging.next%>">Next</a></li>
    </ul>
    <% if(paging.start == 190 && paging.total > 200){ %>
       <br >Too many results. Please refine your result with search and or sort features.
    <% } %>
<% } %>   
</script>

<!-- dialogs start -->
<div id="error-alert" class="modal-form-errors modal hide fade">
	<div class="modal-header">
		<button data-dismiss="modal" class="close">x</button>
		<h3></h3>
	</div>
	<div class="modal-body">
		<p class="subheading">
		</p>
		<ul>
		</ul>
	</div>
	<div class="modal-footer">
		<button data-dismiss="modal" class="btn btn-primary">OK</button>
	</div>
</div>
<div id="general-alert" class="modal-alert modal hide fade">
	<div class="modal-header">
		<button data-dismiss="modal" class="close">x</button>
		<h3></h3>
	</div>
	<div class="modal-body">
		<p>
		</p>
	</div>
	<div class="modal-footer">
		<button data-dismiss="modal" id="ok" class="btn btn-primary">OK</button>
	</div>
</div>
<div id="confirm-alert" class="modal-confirm modal hide fade">
	<div class="modal-header">
		<button data-dismiss="modal" class="close">x</button>
		<h3></h3>
	</div>
	<div class="modal-body">
		<p>
		</p>
	</div>
	<div class="modal-footer">
		<button data-dismiss="modal" class="cancel btn">Cancel</button>
        <button class="submit btn-primary btn">Continue</button>
	</div>
</div>
<!-- dialogs end -->

</body>
</html>